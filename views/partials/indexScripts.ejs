<script type="module">
  import { setUpMap, setUpSearchBar } from "/scripts/index.js";
  setUpMap(JSON.parse("<%= JSON.stringify(items.map((item) => [item.location.x, item.location.y])) %>"));
  setUpSearchBar("<%= items.map((item) => `${item.name} ${item.isLost ? 'lost' : 'found'} at ${item.locationName}`).join() %>".split(","));
</script>

<% items.forEach((item) => { %>
<script type="module">
  import { addPopup } from "/scripts/index.js";
  addPopup([Number("<%= item.location.x %>"), Number("<%= item.location.y %>")],`<%- include('./item', { item }) %>`);
</script>
<% }); %>

<script type="module">
  import { openPopup } from "/scripts/index.js";
  openPopup();
</script>
